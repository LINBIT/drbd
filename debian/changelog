drbd (0.7.15-0) unstable; urgency=low

  * New upstream release

 -- Philipp Reisner <phil@linbit.com>  Mon, 19 Dec 2005 14:44:00 +0200

drbd (0.7.14-0) unstable; urgency=low

  * New upstream release

 -- Philipp Reisner <phil@linbit.com>  Mon, 17 Oct 2005 16:37:52 +0200

drbd (0.7.13-0) unstable; urgency=low

  * New upstream release

 -- Philipp Reisner <phil@linbit.com>  Thu, 1 Sep 2005 10:00:00 +0200

drbd (0.7.12-0) unstable; urgency=low

  * New upstream release

 -- Philipp Reisner <phil@linbit.com>  Wed, 24 Aug 2005 15:01:10 +0200

drbd (0.7.11-1) unstable; urgency=low

  * New upstream release

 -- Cyril Bouthors <cyril@bouthors.org>  Mon, 20 Jun 2005 15:49:40 +0300

drbd (0.7.10-4) unstable; urgency=low

  * debian/control: added missing dependency to dpatch for
    drbd0.7-module-source (closes: #308295).
  * debian/control: updated Maintainer and Uploaders fields to match
    reality.

 -- Cyril Bouthors <cyril@bouthors.org>  Mon, 30 May 2005 11:22:46 +0300

drbd (0.7.10-3) unstable; urgency=low

  * (Cyril Bouthors)
     - scripts/drbd: explicit modprobe and rmmod pathnames
       (initscript_explicit_pathname.patch) (closes: #303060, #302556).

 -- Cyril Bouthors <cyril@bouthors.org>  Sun, 17 Apr 2005 18:08:30 +0300

drbd (0.7.10-2) unstable; urgency=low

  * (Cyril Bouthors)
     - debian/drbd0.7-utils.prerm: silently ignore the initscript return
       code if we remove or deconfigure the package or carefully pay
       attention to it if we upgrade the package. (closes: #295533).
     - debian/control: fixed drbd0.7-module-source description.

 -- Cyril Bouthors <cyril@bouthors.org>  Wed, 16 Feb 2005 21:05:51 +0100

drbd (0.7.10-1) unstable; urgency=low

  * (Cyril Bouthors)
     - New upstream release

 -- Cyril Bouthors <cyril@bouthors.org>  Mon, 31 Jan 2005 17:29:27 +0300

drbd (0.7.9-2) unstable; urgency=low

  * (Cyril Bouthors)
     - Applied patch from Lars Marowsky-Bree <lmb@suse.de> that fixes a
       "severe [...] memory corruption bug [...]".

 -- Cyril Bouthors <cyril@bouthors.org>  Thu, 27 Jan 2005 13:55:00 +0300

drbd (0.7.9-1) unstable; urgency=low

  * (Cyril Bouthors)
     - New upstream release

 -- Cyril Bouthors <cyril@bouthors.org>  Thu, 27 Jan 2005 11:35:19 +0300

drbd (0.7.8-1) unstable; urgency=low

  * (Cyril Bouthors)
     - New upstream release

 -- Cyril Bouthors <cyril@bouthors.org>  Mon, 17 Jan 2005 18:50:49 +0400

drbd (0.7.7-1) unstable; urgency=low

  * (Cyril Bouthors)
     - New upstream release

 -- Cyril Bouthors <cyril@bouthors.org>  Wed, 15 Dec 2004 17:15:35 +0300

drbd (0.7.6-2) unstable; urgency=low

  * (Cyril Bouthors)
     - drbd0.7-module-source: Moved debhelper from Recommends to Depends

 -- Cyril Bouthors <cyril@bouthors.org>  Thu,  9 Dec 2004 20:37:41 +0300

drbd (0.7.6-1) unstable; urgency=low

  * (Cyril Bouthors)
     - New upstream release
     - debian/control.modules.in: updated description
     - debian/TODO: removed

 -- Cyril Bouthors <cyril@bouthors.org>  Tue, 30 Nov 2004 19:43:27 +0300

drbd (0.7.5-2) unstable; urgency=low

  * (Philipp Hug)
    - debian/control: Added Conflict with drbd-util and drbd-module-source
    - debian/control.in.modules: Fixed description for kernel module
    - debian/control.in.modules: Added Conflict line in kernel module package
    - debian/control.in.modules: Change depends to drbd0.7-util
    - debian/rules: don't use top-level makefile, to prevent re-creation of
      drbd_buildtag.c
    - call depmod in postinst of kernel module
    - debian/rules: remove obsolete upstream ./debian/ files in clean target
    - added module-assistant override file
    - this version is ready for sarge (Closes: #277669)

 -- Philipp Hug <debian@hug.cx>  Tue, 19 Oct 2004 20:50:49 +0200

drbd (0.7.5-1) unstable; urgency=low

  * (Cyril Bouthors)
    - New upstream release (closes: #276640).
    - debian/drbd0.7.dirs: removed usr/bin (closes: #276643).
    - debian/control: changed Section from misc to admin.
    - scripts/drbd: prevent the "stop" target from failing if drbd is not running
    - debian/rules: call upstream Makefile targets instead of doing hardcoded stuff, clean.
    - debian/drbd0.7.docs: added upgrade_0.6.x_to_0.7.0.txt and upgrade_0.7.0_to_0.7.1.txt.
    - The package drbd as been renamed to drbd0.7-utils and drbd-source as
      been renamed to drbd0.7-module-source.  We'll introduce drbd0.6-*
      and drbd*-module soon.
    - Added myself as Uploader.

  * (Philipp Hug)
    - Conflict with drbd and drbd-source
    - Fixed description for kernel modules
    - Added Conflict line in kernel-module package
    - Added bison, flex to Build-Depends
    - Call 'make clean' in drbd directory
    - Upgraded to debian-policy 3.6.1
    - Rewritten debian/rules using module-assistant
    - Change binary package name to drbd0.7
    - Added myself as Uploader

 -- Cyril Bouthors <cyril@bouthors.org>  Sat, 16 Oct 2004 23:43:27 +0200

drbd (0.7.4-1) unstable; urgency=low

  * Fixed a critical bug with Linux-2.4.x and HIGHMEM!
  * Fixed a bug that only showed up with the HIGHMEM problem on
    Linux-2.4.x -> It caused the resync process to starve.
  * The drbd.spec file now creates /dev/drbd in the post-install stage.
  * Fixed support for more than 2TB storage. Now DRBD supports up to
    3.99TB storage. It will also tell you, that it is not supported if
    you try to set up a bigger device.
  * Debian's build rules file now knows about the adjust_drbd_config_h.sh
    file.
  * DRBD_DISABLE_SENDPAGE available in drbd_config.h

 -- Philipp Reisner <phil@linbit.com>  Thu, 9 Sep 2004 19:50:00 +0200

drbd (0.7.3-2) unstable; urgency=low

  * Fixed debian/rules: Include adjust_drbd_config_h.sh in drbd-source

 -- Philipp Hug <debian@hug.cx>  Tue, 31 Aug 2004 15:37:38 +0000

drbd (0.7.3-1) unstable; urgency=low

  * Fixed minor bugs in the handling of the generation counters.
  * prevent possible in-kernel buffer overflow in drbd_proc.c
  * Fixed debian's postinst script to create /dev/drbd? instead of /dev/nb?
  * drbd status:
    be nice to heartbeat, include "OK" in output.
  * added FullSync meta data flag to read/write gc.pl
  * make the RHEL3 happy (page_count no longer in mm.h, but in mm_inline.h)
  * [Patch by Pavel Semerad]. Also use the drbd_devfs_name on Linux-2.4.x
  * fix missing dependencies on drbd_config.h

 -- Philipp Reisner <phil@linbit.com>  Fri, 27 Aug 2004 15:02:00 +0200

drbd (0.7.2-1) unstable; urgency=low

  * Proper handling of backing storage devices that occasionally fail
    READA (=read ahead) requests. (E.g. LVM and MD)
  * DRBD now fails READA requests itself, if a resynchronisation is running
    and it would need to fetch the block from its peer.
  * "drbdadm adjust" had a race, which caused random errors. ( Missing
    waitpid() ). Fixed now.
  * Proper subtract SyncPause times from the syncer performance numbers.
  * Fix to the syncer progress bar in /proc/drbd.
  * Fix to debian build rules.

 -- Philipp Reisner <phil@linbit.com>  Fri, 6 Aug 2004 14:44:31 +0200

drbd (0.7.1-1) unstable; urgency=low

  * Upgrade instructions for 0.6.x -> 0.7.0 and 0.7.0 -> 0.7.1
  * Workaround for XFS' IO requests with page count of zero.
  * Handle the human and the timeout count correctly in the new init script.
  * The implementation of the incon-degr-cmd was missing, added.
  * Fix for integer overflow in /proc/drbd syncer progress display
  * Longer timeouts in drbdadm for drbdsetup commands witch operate on
    meta data.
  * New major number 147 (officially registered at lanana.org).
  * Added a missing w_resume_next_wg() in case we stop syncing because
    of connection loss.
  * Fixed a Linux-2.2-ismus in recieve_data_tail(). Should considerably
    speed up protocols A and B.
  * Some work on vendor kernel compatibility

 -- Philipp Reisner <phil@linbit.com>  Fri, 30 Jul 2004 13:50:33 +0200

drbd (0.7.0-1) unstable; urgency=low

  * s/WriteHint/UnplugRemote/g
  * new module parameter major_nr to allow "arbitrary" major numbers
  * adjusted CTH to cope with that
  * fix copy'n'paste and conversion errors in initial bitmap handshake
  * warning "please upgrade me" if peer speaks (PRO_VERSION+1)
  * drbd_set_in_sync and drbd_set_out_of_sync are now macros
    calling to __*, giving file and line information,
    to be able to easily track causes of "strange state"s there.
  * rs_total is now != 0 only if we actually ARE syncing.
    it is reset
  * when sync is done
  * when connection is lost
  * when storage is lost on either node
    this way we can optimize and call drbd_set_in_sync only if rs_total != 0
    (and it feels somewhat more clean, too)
  * makefile adjusted to recognize svn revision and date tags
  * updates and fixes to the test helpers and bash test cases

 -- Philipp Reisner <phil@linbit.com>  Fri, 16 Jul 2004 10:13:33 +0200

drbd (0.7_pre10-1) unstable; urgency=low

  * A fix to a generic bug in the bitmap code introduced with the -pre9
    release (with the 64 bit work)
  * A fix to a bug in the bitmap code only relevant for 64 bit platforms.
  * Better 2.4.x compatibility and compatibility to 2.4.x vendor kernels.
  * Improvements in the way to deal with incompatible protocol releases.
  * Added the "dialog-refresh" config option.

  changes up to -pre9:
  * Re-enabled zero copy IO for protocols B and C. (Zero copy IO is not
    used with protocol A)
  * Implemented the unpopular user dialog in the boot process.
  * Some fixes for Linux-2.4.x compatibility.
  * drbd.conf man page updated
  * Bugfixes for 64bit architectures
  * Ensured protocol compatibility between hosts of different word sizes
    (Tested with i386 and alpha)
  * Support for meta-data on block devices with hardsect size != 512 Byte
    (e.g. dasd on s390x)
  * New debian subdir

 -- Lars Ellenberg <l.g.e@web.de>  Fri, 09 Jul 2004 20:00:19 +0200

drbd (0.7_pre8-2) unstable; urgency=low

  * fix up the modules source package

 -- Bernd Schubert <bernd-schubert@web.de>  Mon,  05 Jul 2004 00:57:38 -0100

drbd (0.7_pre8-1) unstable; urgency=low

  * initial 0.7 debian package

 -- Bernd Schubert <bernd-schubert@web.de>  Mon,  21 Jun 2004 19:57:38 -0400

drbd (0.6.12-5) unstable; urgency=low

  * Changed default drbd.conf file to set a negative inittimeout value and
    updated the README.Debian file to reflect this change.
    (Closes Bug#221751)

 -- David Krovich <dkrovich@csee.wvu.edu>  Tue, 25 May 2004 12:51:15 -0400

drbd (0.6.12-4) unstable; urgency=low

  * Refactored rules file in an attempt to use binary-arch and binary-indep
    targets more wisely. This is an attempt to fix Bug#244392.
  * Listed /etc/ha.d/resource.d/drbd in debian/conffiles.  (Closes Bug#247606)
  * Moved drbdsetup from /usr/bin/ to /usr/sbin.  I think I introduced this
    when I overhauled the debian directory in the 0.6.12-1 release.
    (Closes Bug#247607)

 -- David Krovich <dkrovich@csee.wvu.edu>  Sun, 16 May 2004 15:20:59 -0400

drbd (0.6.12-3) unstable; urgency=low

  * After discussing with upstream, tweak /etc/init.d/drbd script so the
    stop target works if the module is not loaded.  (Closes: Bug#243417)
  * Put the drbd script in the /etc/ha.d/resource.d directory.  (Closes: Bug#245219)

 -- David Krovich <dkrovich@csee.wvu.edu>  Thu, 22 Apr 2004 18:12:47 -0400

drbd (0.6.12-2) unstable; urgency=low

  * Create /dev/nb[0-7] devices in postinst script.  (Closes: Bug#221545)

 -- David Krovich <dkrovich@csee.wvu.edu>  Sat, 17 Apr 2004 15:18:29 -0400

drbd (0.6.12-1) unstable; urgency=low

  * new upstream release.  (Closes: Bug#239804)
  * Completely overhauled the debian/ directory.
  * Changed sequence number in the runlevel to start at 70 and stop
    at 08.  drbd should start after things like ssh, but before
    heartbeat.

 -- David Krovich <dkrovich@csee.wvu.edu>  Mon, 22 Mar 2004 00:04:35 -0500

drbd (0.6.10-3) unstable; urgency=low
  * Added back the drbd.postinst, drbd.postrm, and drbd.prerm scripts until
    I figure out why they aren't being handled by dh_installinit.
  * As of drbd-0.6.9, The drbd module no longer builds against just the
    kernel-headers package and now needs a full kernel-source tree.

 -- David Krovich <dkrovich@csee.wvu.edu>  Mon, 26 Jan 2004 00:32:49 -0500

drbd (0.6.10-2) unstable; urgency=low

  * noel: fixed lintian warning:
    W: drbd: package-contains-CVS-dir usr/share/doc/drbd/HOWTO/CVS/
    W: drbd: script-in-etc-init.d-not-registered-via-update-rc.d /etc/init.d/drbd

  * Lintian/Linda fixes.

  * Tweaked the drbd-0.6.10.orig.tar.gz to not have a debian/ directory in it.
  * Stopped tweaking the copyright notice on drbd_fs.c and drbd_receiver.c.
    I'm not sure how that got there in the first place.
  * Removed mystery report_to_html.pl.debdiff file.
  * Put the datadisk in the correct location.  (Closes: Bug#221544)

  * Removed drbd.postinst, drbd.postrm, and drbd.prerm as they are
    being generated by dh_installinit during the build process and do not
    need to part of the source package.
  * removed dependancy on automake and autoconf
  * Changed control.modules to require debhelper >= 4.
  * Stop settting $KSRC in the rules file.

  * Removed conffiles, files, kernel-patch-wup.substvars as they are
    unneccessary.
  * Tightened the build dependancy on debhelper. >=4
  * Updated Debian packages up to newest upstream version. (Closes: Bug#197906)
  * Updated Package descriptions.  (Closes: Bug#209462)
  * Verified support for devfs.  (Closes: Bug#203552)
  * I'd like to become a Debian Developer and take over maintenance for
    this package.  I'm working with Debian Devolpers on making this happen.

 -- David Krovich <dkrovich@csee.wvu.edu>  Tue, 20 Jan 2004 01:36:58 -0500

drbd (0.6.10-1) unstable; urgency=low

  * With 0.6.9 there was a bug introduced which prevented the sending
    of ACK packets during resync. Fixed.
  * A fix to drbdsetup's wait_connect command.
  * Replaced all invocations of the sleep_on() family functions with the
    invocations of the wait_event() macros. This removes lost wakup events
    and race conditions.
  * New implementation of drbd_wait_ee(). This makes the
    "(BUG?) Moving bh=%p to done_ee" go away.
  * Handle the case if vmalloc() of the bitmap fails.

 -- Philipp Reisner <phil@linbit.com>  Thu, 12 Dec 2003 15:10:44 +0200

drbd (0.6.9-1) unstable; urgency=low

  * New module build system (using kernel source tree build system)
  * New net section option 'ko-count'. It allows you to kick out a
    secondary node which does no longer process data in acceptable time.
    Its default value is 0 which disables this feature.
  * Changing syncgroups while resync runs has shows now the correct behaviour.
  * In case thread creations fails DRBD would deadlock on its own
    semaphore. Fixed now.
  * BKL is no longer used on Linux-2.4.x.
  * Now you can stack mapping block devices like LVM2 (and maybe md) on
    top of drbd (a one character fix).
  * drbdsetup wait_connect on a StandAlone node looked like a timeout and
    forced primary. fixed.
  * if drbdsetup wait_* in fact did timeout this looked like a failed ioctl.
    this bug was newly introduced in 0.6.8. fixed.
  * A fix to a race in _drbd_alloc_ee(). You could trigger this race if
    your filesystem uses a blocksize < 4K and your machine has multiple CPUs.
    By Eric W. Biederman.
  * A maybe bugfix regarding calls to free_page() by Eric W. Biederman.
  * A cleanup patch to drbd_process_done_ee() by Eric W. Biederman.

 -- Philipp Reisner <phil@linbit.com>  Thu, 27 Nov 2003 08:21:34 +0200

drbd (0.6.8-1) unstable; urgency=low

  * Two fixes to the sync-group functionality.

 -- Philipp Reisner <phil@linbit.com>  Mon, 20 Oct 2003 11:45:33 +0200

drbd (0.6.7-1) unstable; urgency=low

  * A fix to a bug that could cause data corruption if you use a
    other blocksize than 4k to access the DRBD device.
  * A fix to a SMP race in the syncer code. The problem was tirggered
    when using DRBD on QLogic fiber channel adapters.
  * Replaced various calls to sleep_on() variants with the wait_event()
    macros. -- This removes potential (, non-critical) SMP races.
  * This release includes the sync-group option.

 -- Philipp Reisner <phil@linbit.com>  Thu, Oct 13 2003 11:17:27 +0200

drbd (0.6.6-1) unstable; urgency=low

  * In the 0.6.5 release the secondary_remote command was badly broken,
    it succeeded when it should fail silently. This is fixed now.
  * Probabely in all previous releases, the resyncer thread did not
    exit properly if the secondary node goes away during resync.
    This was not fatal sind the resyncher thread did exit at soon
    as it gets a network error. This is fixed now.
  * Some new switches to the drbd script.

 -- Philipp Reisner <phil@linbit.com>  Mon, 28 Jul 2003 14:40:43 +0200

drbd (0.6.5-1) unstable; urgency=low

  * Improvements to the build system
  * Now it is possible to tune the socket send buffer size via drbdsetup/
    drbd.conf. This is especially usefull for WAN mirroring / using
    protocol A.
  * Compatibility code to compile DRBD under RedHat 9.0 (RH's version of
    Linux-2.4.20)
  * Improved sample drbd.conf file

 -- Philipp Reisner <phil@linbit.com>  Sun, 06 Jul 2003 13:35:00 +0100

drbd (0.6.4-1) unstable; urgency=low

  * Reworked build system (i.e. better Makefiles)
  * SyncAll works forward instead of backwards. Improves performance on
    some storage controlers.
  * Reworked /etc/init.d/drbd script (i.e. better support of
    different bash releases)

 -- Philipp Reisner <phil@linbit.com>  Thu, 01 May 2003 21:00:00 +0100

drbd (0.6.3-1) unstable; urgency=low

  * Lockup of primary if secondary fails during resync. Fixed. (Stupid!)
  * Probabely SMP only deadlock in the drop-conection code path.
  * Improved connect code. (The old code could trap into a distributed
    deadlock, resulting in an endless connect/disconnect loop.)
  * The 'BitMap too small bug' was actually caused by a patch in
    SuSE's distribution kernel. This patch makes DRBD 'more' compatible
    with SuSE's kernel.
  * Improved code to allocate buffers for the rsynchronisation process.
    The old code allocated physical adjacent pages although the syncer
    does not need them! The old code could fail under high memory pressure.

 -- Philipp Reisner <phil@linbit.com>  Thu, 20 Mar 2003 20:23:40 +0100

drbd (0.6.2-1) unstable; urgency=low

  * SMP fix in drbd_dio_end_sec()
  * /etc/init.d/drbd knows about returncodes of fsck
  * SUSE style rcdrbd
  * Fixes for uninstall Target of the Makefiles.

 -- Philipp Reisner <phil@linbit.com>  Tue, 11 Feb 2003 15:58:49 +0100

drbd (0.6.1-1) unstable; urgency=low

  * Stable release

 -- Philipp Reisner <phil@linbit.com>  Mon, 25 Nov 2002 14:51:39 +0100

drbd (0.6-1.pre16-0cvs20020909.1) unstable; urgency=low

  * changed the maintainer to jan@debian.org in agreement with
    Ard who currently doesn't work on drbd.
  * changed name of generated drbd-module-... package to include
    the full version number of the kernel package
  * place generated drbd-module-... package in $(KSRC)/..

 -- Jan Niehusmann <jan@debian.org>  Fri, 13 Sep 2002 15:57:01 +0200

drbd (0.6-1.pre16-0cvs20020909) unstable; urgency=low

  * updated version
  * strange version number because debian versioning doesn't handle
    -pre versions sanely
  * uploading to unstable. (Closes: Bug#130031)

 -- Jan Niehusmann <jan@debian.org>  Wed, 11 Sep 2002 13:10:03 +0200

drbd (cvs20010511-1) unstable; urgency=low

  * First deb-anized version

 -- Ard van Breemen <ard@telegraafnet.nl>  Fri, 11 May 2001 11:59:53 +0200
